{
  "formatter": {
    "kind": "super-auth",
    "authnType": "&authnType",
    "useAuthz": "&useAuthz",
    "failureAuthAllow": "&failureAuthAllow",
    "bufferSetting": "&bufferSetting"
  },
  "layouts": [
    {
      "key": "authnType",
      "alias": "认证类型",
      "type": "select",
      "options": [
        {
          "text": "轻舟API网关签名认证",
          "value": "aksk_authz_type"
        },
        {
          "text": "jwt认证",
          "value": "jwt_authz_type"
        }
      ]
    },
    {
      "key": "useAuthz",
      "alias": "是否需要鉴权",
      "help": "若不需要鉴权，则只会对客户端请求进行认证，所有合法的外部认证都可以访问",
      "type": "switch",
      "default": false
    },
    {
      "key": "failureAuthAllow",
      "alias": "是否允许匿名访问",
      "help": "仅对无需鉴权的情况可配置，开启允许匿名访问后，即使认证失败也会将请求继续转发到后端服务，只是转发后相关的认证请求头为空",
      "type": "switch",
      "default": false,
      "visible": {
        "this.useAuthz": false
      }
    },
    {
      "key": "bufferSetting",
      "alias": "请求体缓存设置",
      "help": "当选择轻舟API网关签名认证时，对请求体的计算方式，默认-----------------------",
      "type": "layouts",
      "visible": {
        "this.authnType": "aksk_authz_type"
      },
      "layouts": [
        {
          "key": "allowPartialMessage",
          "alias": "是否允许部分消息",
          "help": "若允许部分消息，当Request body大小超出 最大请求体字节数 限制后，则截取前面部分作为请求体用于签名计算",
          "type": "switch",
          "default": false
        },
        {
          "key": "maxRequestBytes",
          "alias": "最大请求体字节数",
          "type": "input",
          "default": "4096",
          "rules": [
            "Number",
            "MinNumber(0)",
            "Required"
          ],
          "visible": {
            "this.allowPartialMessage": true
          }
        }
      ]
    }
  ]
}